<%- include('../partials/header') %>
<%
  const today = new Date();
  const tomorrow = new Date();
  tomorrow.setDate(today.getDate() + 1);

  const format = (d) => {
    const offset = d.getTimezoneOffset();
    const local = new Date(d.getTime() - offset * 60000);
    return local.toISOString().split('T')[0];
  };
%>
<h2>Create Project</h2>

<form method="POST">
Project Name: <input name="project_name"><br>

Owner:
<select name="user_id">
<% users.forEach(u => { %>
<option value="<%= u.user_id %>"><%= u.name %></option>
<% }) %>
</select><br>

Start Date:
<input type="date" name="start_date" value="<%= format(today) %>"><br>

End Date:
<input type="date" name="end_date" value="<%= format(tomorrow) %>"><br>
Status:
<select name="status">
  <option value="planning" selected>Planning</option>
  <option value="active">Active</option>
  <option value="completed">Completed</option>
</select>
<br>

<button type="submit">Save</button>
<button type="button" onclick="history.back()">Cancel</button>
</form>

<%- include('../partials/footer') %>